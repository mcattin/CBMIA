########################################
#  This file was generated by hdlmake  #
#  http://ohwr.org/projects/hdl-make/  #
########################################

## variables #############################
PWD := $(shell pwd)

MODELSIM_INI_PATH := /opt/modelsim_10.0c/modeltech

VCOM_FLAGS := -quiet -modelsimini modelsim.ini
VSIM_FLAGS :=
VLOG_FLAGS := -quiet -modelsimini modelsim.ini 
VERILOG_SRC := receiver_tb.sv \

VERILOG_OBJ := work/receiver_tb/.receiver_tb_sv \

VHDL_SRC := ../../rtl/mem_interface_pkg.vhd \
../../rtl/cbmia_pkg.vhd \
../../rtl/incr_cnt.vhd \
../../rtl/decr_cnt.vhd \
../../rtl/mil1553_rx.vhd \
../../rtl/mil1553_rx_deglitcher.vhd \
../../rtl/mil1553_rx_deserialiser.vhd \
../../rtl/mil1553_rx_clk.vhd \

VHDL_OBJ := work/mem_interface_pkg/.mem_interface_pkg_vhd \
work/cbmia_pkg/.cbmia_pkg_vhd \
work/incr_cnt/.incr_cnt_vhd \
work/decr_cnt/.decr_cnt_vhd \
work/mil1553_rx/.mil1553_rx_vhd \
work/mil1553_rx_deglitcher/.mil1553_rx_deglitcher_vhd \
work/mil1553_rx_deserialiser/.mil1553_rx_deserialiser_vhd \
work/mil1553_rx_clk/.mil1553_rx_clk_vhd \

LIBS := work
LIB_IND := work/.work
## rules #################################
sim: modelsim.ini $(LIB_IND) $(VERILOG_OBJ) $(VHDL_OBJ)
$(VERILOG_OBJ): $(VHDL_OBJ) 
$(VHDL_OBJ): $(LIB_IND) modelsim.ini

modelsim.ini: $(MODELSIM_INI_PATH)/modelsim.ini
		cp $< .
clean:
		rm -rf ./modelsim.ini $(LIBS)
.PHONY: clean

work/.work:
	(vlib work && vmap -modelsimini modelsim.ini work && touch work/.work )|| rm -rf work 

work/receiver_tb/.receiver_tb_sv: receiver_tb.sv 
		vlog -work work $(VLOG_FLAGS)  -sv +incdir+.  $<
		@mkdir -p $(dir $@) && touch $@ 



work/mem_interface_pkg/.mem_interface_pkg_vhd: ../../rtl/mem_interface_pkg.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@


work/cbmia_pkg/.cbmia_pkg_vhd: ../../rtl/cbmia_pkg.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@


work/cbmia_pkg/.cbmia_pkg: \
work/mem_interface_pkg/.mem_interface_pkg

work/incr_cnt/.incr_cnt_vhd: ../../rtl/incr_cnt.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@


work/decr_cnt/.decr_cnt_vhd: ../../rtl/decr_cnt.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@


work/mil1553_rx/.mil1553_rx_vhd: ../../rtl/mil1553_rx.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@


work/mil1553_rx/.mil1553_rx: \
work/cbmia_pkg/.cbmia_pkg

work/mil1553_rx_deglitcher/.mil1553_rx_deglitcher_vhd: ../../rtl/mil1553_rx_deglitcher.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@


work/mil1553_rx_deglitcher/.mil1553_rx_deglitcher: \
work/cbmia_pkg/.cbmia_pkg

work/mil1553_rx_deserialiser/.mil1553_rx_deserialiser_vhd: ../../rtl/mil1553_rx_deserialiser.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@


work/mil1553_rx_deserialiser/.mil1553_rx_deserialiser: \
work/cbmia_pkg/.cbmia_pkg

work/mil1553_rx_clk/.mil1553_rx_clk_vhd: ../../rtl/mil1553_rx_clk.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@


work/mil1553_rx_clk/.mil1553_rx_clk: \
work/cbmia_pkg/.cbmia_pkg

