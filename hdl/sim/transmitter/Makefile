########################################
#  This file was generated by hdlmake  #
#  http://ohwr.org/projects/hdl-make/  #
########################################

## variables #############################
PWD := $(shell pwd)

MODELSIM_INI_PATH := /opt/modelsim_10.0c/modeltech

VCOM_FLAGS := -quiet -modelsimini modelsim.ini
VSIM_FLAGS :=
VLOG_FLAGS := -quiet -modelsimini modelsim.ini 
VERILOG_SRC := 
VERILOG_OBJ := 
VHDL_SRC := ../../rtl/mem_interface_pkg.vhd \
../../rtl/cbmia_pkg.vhd \
transmitter_tb.vhd \
../../rtl/mil1553_tx.vhd \
../../rtl/mil1553_tx_serialiser.vhd \
../../rtl/mil1553_tx_clk.vhd \

VHDL_OBJ := work/mem_interface_pkg/.mem_interface_pkg_vhd \
work/cbmia_pkg/.cbmia_pkg_vhd \
work/transmitter_tb/.transmitter_tb_vhd \
work/mil1553_tx/.mil1553_tx_vhd \
work/mil1553_tx_serialiser/.mil1553_tx_serialiser_vhd \
work/mil1553_tx_clk/.mil1553_tx_clk_vhd \

LIBS := work
LIB_IND := work/.work
## rules #################################
sim: modelsim.ini $(LIB_IND) $(VERILOG_OBJ) $(VHDL_OBJ)
$(VERILOG_OBJ): $(VHDL_OBJ) 
$(VHDL_OBJ): $(LIB_IND) modelsim.ini

modelsim.ini: $(MODELSIM_INI_PATH)/modelsim.ini
		cp $< .
clean:
		rm -rf ./modelsim.ini $(LIBS)
.PHONY: clean

work/.work:
	(vlib work && vmap -modelsimini modelsim.ini work && touch work/.work )|| rm -rf work 


work/mem_interface_pkg/.mem_interface_pkg_vhd: ../../rtl/mem_interface_pkg.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@


work/cbmia_pkg/.cbmia_pkg_vhd: ../../rtl/cbmia_pkg.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@


work/cbmia_pkg/.cbmia_pkg: \
work/mem_interface_pkg/.mem_interface_pkg

work/transmitter_tb/.transmitter_tb_vhd: transmitter_tb.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@


work/transmitter_tb/.transmitter_tb: \
work/cbmia_pkg/.cbmia_pkg

work/mil1553_tx/.mil1553_tx_vhd: ../../rtl/mil1553_tx.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@


work/mil1553_tx/.mil1553_tx: \
work/cbmia_pkg/.cbmia_pkg

work/mil1553_tx_serialiser/.mil1553_tx_serialiser_vhd: ../../rtl/mil1553_tx_serialiser.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@


work/mil1553_tx_serialiser/.mil1553_tx_serialiser: \
work/cbmia_pkg/.cbmia_pkg

work/mil1553_tx_clk/.mil1553_tx_clk_vhd: ../../rtl/mil1553_tx_clk.vhd
		vcom $(VCOM_FLAGS)  -work work $< 
		@mkdir -p $(dir $@) && touch $@


work/mil1553_tx_clk/.mil1553_tx_clk: \
work/cbmia_pkg/.cbmia_pkg

